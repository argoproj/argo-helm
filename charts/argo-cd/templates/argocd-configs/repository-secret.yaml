{{- if .Values.configs.repositories }}
apiVersion: v1
kind: List
items:
{{- range $repo_key, $repo_value := .Values.configs.repositories }}
  - apiVersion: v1
    kind: Secret
    metadata:
      name: argocd-repo-{{ $repo_key }}
      labels:
        argocd.argoproj.io/secret-type: repository
        {{- include "argo-cd.labels" (dict "context" . "component" .Values.server.name "name" "secret") | nindent 8 }}
    data:
      {{- range $key, $value := $repo_value }}
      {{ $key }}: {{ $value | b64enc }}
      {{- end }}
{{- end }}
{{- end }}
