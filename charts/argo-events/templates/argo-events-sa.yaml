# All argo-events services are bound to the "argo-events" service account.
# In RBAC enabled setups, this SA is bound to specific roles.
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ .Values.serviceAccount.name }}
  namespace: {{ .Release.Namespace }}
{{- with .Values.serviceAccount.annotations }}
  annotations:
{{ toYaml . | indent 4 }}
{{- end }}
{{- if .Values.additionalSaNamespaces }}
{{ $sa := .Values.serviceAccount.name }}
{{ $annotations := .Values.serviceAccount.annotations  }}
{{- range $namespace := .Values.additionalSaNamespaces }}
---
apiVersion: v1
kind: ServiceAccount
metadata:
{{- with $annotations }}
  annotations:
{{ toYaml . | indent 4 }}
{{- end }}
  name: {{ $sa }}
  namespace: {{ $namespace }}
{{- end }}
{{- end }}
